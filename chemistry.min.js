var __read=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};define("dragger",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dragger=t.DropZone=t.Draggable=void 0;function o(e,t){e.classList.contains(t)||e.classList.add(t)}function i(e,t){e.classList.contains(t)&&e.classList.remove(t)}function n(e,t){void 0===t&&(t="overed");var n=this;this.registerListeners=function(t,e){return n.element.ondragenter=function(){return n.onEnter(t)},n.element.ondragover=function(e){e.preventDefault(),n.onEnter(t)},n.element.ondragleave=function(){return n.onLeave(t)},n.element.ondrop=function(){e(t),n.onLeave(t)},n},this.onEnter=function(e){e.obj&&(e.zone=n,o(n.element,n.cls))},this.onLeave=function(e){e.obj&&(e.zone=void 0,i(n.element,n.cls))},this.element=e,this.cls=t}function r(e){var t=this;this.reset=function(){t.ctx={obj:void 0,zone:void 0},t.objs=[],t.zones=[]},this.registerObj=function(e){t.objs.push(e.registerListeners(t.ctx))},this.registerZone=function(e){t.zones.push(e.registerListeners(t.ctx,t.cbk))},this.cbk=e,this.reset()}t.Draggable=function(e,t,n){void 0===n&&(n="dragged");var r=this;this.registerListeners=function(e){return r.element.ondragstart=function(){return r.onDragStart(e)},r.element.ondragend=function(){return r.onDragStop(e)},r},this.onDragStart=function(e){r.element.draggable&&(e.obj=r,o(r.element,r.cls))},this.onDragStop=function(e){r.element.draggable&&(e.obj=void 0,i(r.element,r.cls),r.element.draggable=!1)},this.element=e,this.handle=t,this.cls=n,this.handle.onmousedown=function(){r.element.draggable=!0},this.handle.onmouseup=function(){r.element.draggable=!1}},t.DropZone=n;t.Dragger=r}),define("components/icons",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconDragHorizontal=t.IconDragVertical=t.IconDrag=t.IconPen=t.IconEye=t.IconClose=void 0;function n(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=(t.setAttribute("viewBox","0 0 24 24"),document.createElementNS("http://www.w3.org/2000/svg","path"));return n.setAttribute("d",e),t.appendChild(n),t}t.IconClose=function(){return n("M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z")},t.IconEye=function(){return n("M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z")},t.IconPen=function(){return n("M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z")},t.IconDrag=function(){return n("M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z")},t.IconDragVertical=function(){return n("M9,3H11V5H9V3M13,3H15V5H13V3M9,7H11V9H9V7M13,7H15V9H13V7M9,11H11V13H9V11M13,11H15V13H13V11M9,15H11V17H9V15M13,15H15V17H13V15M9,19H11V21H9V19M13,19H15V21H13V19Z")};t.IconDragHorizontal=function(){return n("M3,15V13H5V15H3M3,11V9H5V11H3M7,15V13H9V15H7M7,11V9H9V11H7M11,15V13H13V15H11M11,11V9H13V11H11M15,15V13H17V15H15M15,11V9H17V11H15M19,15V13H21V15H19M19,11V9H21V11H19Z")}}),define("components/handle",["require","exports","components/icons"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handle=void 0;var r={vertical:n.IconDragVertical,horizontal:n.IconDragHorizontal,default:n.IconDrag};t.Handle=function(e){void 0===e&&(e="default");var t=document.createElement("div");return t.appendChild(r[e]()),t}}),define("components/remove",["require","exports","components/icons"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Remove=void 0;t.Remove=function(){var e=document.createElement("div");return e.appendChild((0,n.IconClose)()),e}}),define("components/toggle",["require","exports","components/icons"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Toggle=void 0;t.Toggle=function(e,t){var n=__read([(0,a.IconEye)(),(0,a.IconPen)()],2),r=n[0],o=n[1],i=document.createElement("button");return i.appendChild(e?o:r),i.onclick=function(){var e=t();i.replaceChild(e?o:r,e?r:o)},i}}),define("elements/models/electron",["require","exports","components/handle","components/remove","components/toggle"],function(e,t,l,c,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Electron=void 0,t.Electron=function(e,t,n,r,o){var a=this;this.serialize=function(){return{type:a.type,data:a.data}},this.editor=function(){return[]},this.shower=function(){return[]},this.toggle=function(){return a.show=!a.show,a.data.show=a.show,a._content(),a.show},this._visuals=function(){var e=(0,l.Handle)("horizontal"),t=(e.className="electron-handle",(0,s.Toggle)(a.show,a.toggle)),n=(t.className="electron-toggle",document.createElement("div")),r=(n.innerHTML=".: ".concat(a.type," :."),document.createElement("div")),n=(r.className="electron-header-left",r.appendChild(e),r.appendChild(t),r.appendChild(n),(0,c.Remove)()),o=(n.className="electron-remove",document.createElement("div")),i=(o.className="electron-header-right",o.appendChild(n),document.createElement("div")),r=(i.className="electron-header",i.appendChild(r),i.appendChild(o),document.createElement("div")),o=(r.className=a.className,r.classList.add("electron-content"),document.createElement("div"));o.className="electron",o.appendChild(i),o.appendChild(r),a.element=o,a.visuals={header:{handle:e,toggle:t,remove:n},content:r}},this._content=function(){var t=a.visuals.content;Array.from(t.children).forEach(function(e){return t.removeChild(e)}),(a.show?a.shower():a.editor()).forEach(function(e){return t.appendChild(e)})},this.type=e,this.data=t,this.className=n,this.readonly=null!=r&&r,this.show=null!=o&&o,this._visuals(),this._content()}}),define("utils",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insert=void 0;t.insert=function(e,t,n){n=null!=n?n:e.length;return __spreadArray(__spreadArray(__spreadArray([],__read(e.slice(0,n)),!1),[t],!1),__read(e.slice(n)),!1)}}),define("elements/models/atom",["require","exports","utils"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Atom=void 0,t.Atom=function(){var n=this;this.get=function(e){return n.electrons[e]},this.isEmpty=function(){return 0===n.electrons.length},this.serialize=function(){return{electrons:n.electrons.map(function(e){return e.serialize()})}},this.register=function(e,t){n.electrons=(0,r.insert)(n.electrons,e,t)},this.unregister=function(e){n.electrons.splice(n.electrons.indexOf(e),1)},this.electrons=[]}}),define("elements/models/molecule",["require","exports","utils"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Molecule=void 0,t.Molecule=function(){var n=this;this.get=function(e){return n.atoms[e]},this.isEmpty=function(){return 0===n.atoms.length},this.serialize=function(){return{atoms:n.atoms.map(function(e){return e.serialize()})}},this.register=function(e,t){n.atoms=(0,r.insert)(n.atoms,e,t)},this.unregister=function(e){n.atoms.splice(n.atoms.indexOf(e),1)},this.discarge=function(){n.atoms.map(function(e){e.isEmpty()&&n.unregister(e)})},this.atoms=[]}}),define("components/inputs",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputNumber=t.InputText=void 0;t.InputText=function(e,t,n,r){function o(e){return""===e||"<br>"===e}var i=null!=r&&r,r=document.createElement("div"),a=(r.style.position="relative",r.className="input-text",document.createElement("div")),l=(a.style.pointerEvents="none",a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.display=o(e.trim())?"block":"none",a.className="input-placeholder",a.innerHTML=t,document.createElement("div"));return l.style.whiteSpace="pre-wrap",l.contentEditable="true",l.innerHTML=e,l.onkeydown=function(e){"Enter"===e.key&&i&&e.preventDefault()},l.oninput=function(){n(l.innerHTML.trim()),a.style.display=o(l.innerHTML)?"block":"none"},l.onpaste=function(e){if(1===e.clipboardData.types.length&&"text/plain"===e.clipboardData.types[0])return!0;e.preventDefault()},r.appendChild(l),r.appendChild(a),r};t.InputNumber=function(e,t,n,r){var o=document.createElement("div"),i=(o.className="input-number",o.style.display="flex",o.style.flexDirection="row",document.createElement("input")),t=(i.setAttribute("type","number"),i.setAttribute("min",String(t)),i.setAttribute("max",String(n)),i.setAttribute("value",String(e)),i.onkeydown=function(e){return e.preventDefault()},document.createElement("button")),n=(t.innerHTML="+",t.onclick=function(){i.stepUp(),r(Number(i.value))},document.createElement("button"));return n.innerHTML="-",n.onclick=function(){i.stepDown(),r(Number(i.value))},o.appendChild(n),o.appendChild(i),o.appendChild(t),o}}),define("elements/electrons/header",["require","exports","elements/models/electron","components/inputs"],function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;i=n.Electron,__extends(r,i);var i,n=r;function r(e,t,n){var r=i.call(this,"Header",e,"electron-element-header",t,n)||this;return r.editor=function(){return[(0,o.InputNumber)(r.data.level,1,3,function(e){return r.data.level=e}),(0,o.InputText)(r.data.text,"Enter header",function(e){return r.data.text=e},!0)]},r.shower=function(){var e=document.createElement("h".concat(r.data.level));return e.innerHTML=r.data.text,[e]},r._visuals(),r._content(),r}t.Header=n}),define("elements/electrons/paragraph",["require","exports","elements/models/electron","components/inputs"],function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Paragraph=void 0;i=n.Electron,__extends(r,i);var i,n=r;function r(e,t,n){var r=i.call(this,"Paragraph",e,"electron-element-paragraph",t,n)||this;return r.editor=function(){return[(0,o.InputText)(r.data.text,"Enter text",function(e){return r.data.text=e})]},r.shower=function(){var e=document.createElement("p");return e.innerHTML=r.data.text,[e]},r._visuals(),r._content(),r}t.Paragraph=n}),define("elements/electrons/image",["require","exports","components/inputs","elements/models/electron"],function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageMedia=void 0;i=n.Electron,__extends(r,i);var i,n=r;function r(e,t,n){var r=i.call(this,"Image",e,"electron-element-image",t,n)||this;return r.editor=function(){return[(0,o.InputText)(r.data.src,"Enter image url",function(e){return r.data.src=e},!0),(0,o.InputText)(r.data.alt,"Enter image caption",function(e){return r.data.alt=e},!0)]},r.shower=function(){var e=document.createElement("figure"),t=document.createElement("img"),t=(t.setAttribute("src",r.data.src),e.appendChild(t),document.createElement("figcaption"));return t.innerHTML=r.data.alt,e.appendChild(t),[e]},r._visuals(),r._content(),r}t.ImageMedia=n}),define("elements/index",["require","exports","elements/models/electron","elements/models/atom","elements/models/molecule","elements/electrons/header","elements/electrons/paragraph","elements/electrons/image"],function(e,f,t,h,g,n,r,o){"use strict";var i;Object.defineProperty(f,"__esModule",{value:!0}),f.Molecule=f.Atom=f.Electron=f.deserialize=f.electronMap=void 0,Object.defineProperty(f,"Electron",{enumerable:!0,get:function(){return t.Electron}}),Object.defineProperty(f,"Atom",{enumerable:!0,get:function(){return h.Atom}}),Object.defineProperty(f,"Molecule",{enumerable:!0,get:function(){return g.Molecule}}),f.electronMap=((i={}).Header=n.Header,i.Paragraph=r.Paragraph,i.Image=o.ImageMedia,i);f.deserialize=function(e){var t,n,r,o,i=new g.Molecule;try{for(var a=__values(e.atoms),l=a.next();!l.done;l=a.next()){var c=l.value,s=new h.Atom;try{r=void 0;for(var u=__values(c.electrons),d=u.next();!d.done;d=u.next()){var m=d.value,p=new f.electronMap[m.type](m.data,m.readonly);s.register(p)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}i.register(s)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}}),define("index",["require","exports","dragger","elements/index","components/handle","components/remove"],function(e,t,d,s,m,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chemistry=void 0;function n(){return new s.electronMap.Paragraph({text:""})}function f(e){var t=document.createElement("div");return t.setAttribute("atomidx",String(e)),t.className="dropzone-vertical",t}function h(e,t){var n=document.createElement("div");return n.setAttribute("atomidx",String(e)),n.setAttribute("electronIdx",String(t)),n.className="dropzone-horizontal",n}t.Chemistry=function(e){void 0===e&&(e="chemistry");var u=this;this.addVertical=function(e){var t=new s.Atom;t.register(n()),u.molecule.register(t,e),window.requestAnimationFrame(u.render)},this.addHorizontal=function(e,t){e.register(n(),t),window.requestAnimationFrame(u.render)},this.removeVertical=function(e){u.molecule.unregister(e),window.requestAnimationFrame(u.render)},this.removeHorizontal=function(e,t){e.unregister(e.get(t)),window.requestAnimationFrame(u.render)},this.drop=function(e){var t,n,r,e=__read([e.obj.element,e.zone.element],2),o=e[0],e=e[1],i=Number(e.getAttribute("atomIdx")),a=Number(e.getAttribute("electronIdx")),l=Number(o.getAttribute("atomIdx")),c=Number(o.getAttribute("electronIdx"));o.classList.contains("electron")?(n=(t=u.molecule.get(l)).get(c),e.classList.contains("dropzone-vertical")&&(r=new s.Atom,u.molecule.register(r,i),t.unregister(n),r.register(n,a)),e.classList.contains("dropzone-horizontal")&&(r=u.molecule.get(i),a<c&&t.unregister(n),r.register(n,a),c<=a)&&t.unregister(n)):o.classList.contains("atom")&&e.classList.contains("dropzone-vertical")&&(r=u.molecule.get(l),i<l&&u.molecule.unregister(r),u.molecule.register(r,i),l<=i)&&u.molecule.unregister(r),window.requestAnimationFrame(u.render)},this.clear=function(){Array.from(u.element.children).forEach(function(e){return u.element.removeChild(e)}),u.dragger.reset(),u.molecule.discarge()},this.render=function(){function e(r,o){var t,i=document.createElement("div"),e=(i.className="atom",i.setAttribute("atomIdx",String(r)),(0,m.Handle)("vertical"));e.className="atom-handle",u.dragger.registerObj(new d.Draggable(i,e)),i.appendChild(e),(e=h(r,0)).onclick=function(){return u.addHorizontal(o,0)},u.dragger.registerZone(new d.DropZone(e)),i.appendChild(e);try{t=void 0;for(var n=__values(o.electrons.entries()),a=n.next();!a.done;a=n.next()){var l=__read(a.value,2);!function(e,t){var n=t.element,n=(t.visuals.header.remove.onclick=function(){return u.removeHorizontal(o,e)},n.setAttribute("atomIdx",String(r)),n.setAttribute("electronIdx",String(e)),i.appendChild(n),u.dragger.registerObj(new d.Draggable(n,t.visuals.header.handle)),h(r,e+1));n.onclick=function(){return u.addHorizontal(o,e+1)},u.dragger.registerZone(new d.DropZone(n)),i.appendChild(n)}(l[0],l[1])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(c=n.return)&&c.call(n)}finally{if(t)throw t.error}}var c=(0,p.Remove)();c.className="atom-remove",c.onclick=function(){return u.removeVertical(o)},i.appendChild(c),s.appendChild(i),(e=f(r+1)).onclick=function(){return u.addVertical(r+1)},u.dragger.registerZone(new d.DropZone(e)),s.appendChild(e)}u.clear();var t,n,s=document.createElement("div"),r=(s.className="molecule",u.element.appendChild(s),f(0));r.onclick=function(){return u.addVertical(0)},u.dragger.registerZone(new d.DropZone(r)),s.appendChild(r);try{for(var o=__values(u.molecule.atoms.entries()),i=o.next();!i.done;i=o.next()){var a=__read(i.value,2);e(a[0],a[1])}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},this.dragger=new d.Dragger(this.drop),this.molecule=new s.Molecule,this.element=document.querySelector("#".concat(e)),window.requestAnimationFrame(this.render)}});